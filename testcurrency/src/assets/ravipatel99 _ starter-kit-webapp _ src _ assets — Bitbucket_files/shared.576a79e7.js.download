!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirecbf3;r.register("22xei",(function(t,r){e(t.exports,"LOADING_MODULE_DELAY",(function(){return n}));const n=300})),r.register("h7WiY",(function(n,o){e(n.exports,"default",(function(){return g}));var i=r("jgze0"),a=r("61szk"),s=r("7RIig"),l=r("1HQ2H"),c=r("hp8zO"),u=r("7HEfz"),d=r("8bsam"),p=r("jeFQe");class g extends a.PureComponent{componentDidMount(){const{delay:e}=this.state;e&&(this.timeout=setTimeout((()=>this.setState({delay:0})),e))}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{delay:e}=this.state,{action:r,module:n,failedCallback:o}=this.props;if("loading"===r&&e)return!1;const g=c.get(n,"app_name",c.get(n,"app_key","")),f=c.get(n,"app_base_url",c.get(n,"source.url",""));return t(a).createElement(p.Container,null,"loading"===r&&t(a).createElement(p.Spinner,null,t(a).createElement(l.default,{size:"small",delay:0})),g&&f&&t(a).createElement(s.FormattedMessage,t(i)({},d.default[r],{values:{link:t(a).createElement("a",{href:f,target:"_blank"},g),action:"timeout"===r&&t(a).createElement(u.default,{appearance:"link",spacing:"none",onClick:o},t(a).createElement(s.FormattedMessage,d.default.cancelText))}})))}constructor(...e){super(...e),this.state={delay:this.props.delay}}}g.defaultProps={action:"loading",delay:0}})),r.register("8bsam",(function(t,n){e(t.exports,"default",(function(){return o}));var o=r("7RIig").defineMessages({loading:{id:"frontbucket.connect.loadingDescription",defaultMessage:"Loading app {link}."},timeout:{id:"frontbucket.connect.loadingTimeoutDescription",defaultMessage:"App {link} is not responding. Wait or {action}."},failed:{id:"frontbucket.connect.loadingFailedDescription",defaultMessage:"App {link} failed to load."},cancelText:{id:"frontbucket.connect.cancelText",defaultMessage:"cancel"}})})),r.register("jeFQe",(function(t,n){e(t.exports,"Container",(function(){return i})),e(t.exports,"Spinner",(function(){return a}));var o=r("eQkAL");const i=o.default("small",{target:"e1rsklf90"})({name:"1tbblij",styles:"position:absolute;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;margin:0;padding:0 12px;"}),a=o.default("div",{target:"e1rsklf91"})({name:"ttjnck",styles:"margin:0 8px 0 0;"})})),r.register("4QrWa",(function(t,n){e(t.exports,"webPanelHeight",(function(){return a})),e(t.exports,"webPanelWidth",(function(){return s})),e(t.exports,"SourceWebPanel",(function(){return l})),e(t.exports,"PullRequestWebPanel",(function(){return c})),e(t.exports,"WebPanelHeader",(function(){return u})),e(t.exports,"WebPanelSection",(function(){return d}));var o=r("eQkAL"),i=r("6aCAs");const a="50px",s="100%",l=o.default("div",{target:"evqr4d40"})("display:flex;position:relative;margin-bottom:",3*i.gridSize(),"px;min-height:",a,";max-height:280px;overflow:auto;iframe{display:block;}"),c=o.default("div",{target:"evqr4d41"})("display:flex;position:relative;margin-top:",i.gridSize(),"px;overflow:auto;min-height:",a,";max-height:600px;iframe{display:block;overflow:auto;}"),u=o.default("span",{target:"evqr4d42"})(i.typography.h400(),";"),d=o.default("section",{target:"evqr4d43"})("margin-top:",i.gridSize(),"px;margin-bottom:",i.gridSize(),"px;")})),r.register("2mhT6",(function(n,o){e(n.exports,"default",(function(){return g}));var i=r("7HEfz"),a=r("61szk"),s=r("7RIig"),l=r("1HQ2H"),c=r("gGWK9"),u=r("cQwU7"),d=r("jtcYm");class p extends a.PureComponent{render(){const e=t(a).createElement(l.default,{size:"small",delay:0});return t(a).createElement(i.default,{onClick:this.onGiveFeedbackClicked,iconBefore:this.state.isLoading?e:""},t(a).createElement(s.FormattedMessage,d.default.giveFeedback))}constructor(...e){super(...e),this.state={showCollectorDialog:void 0,isLoading:!1},this.onGiveFeedbackClicked=()=>{var e;this.setState({isLoading:!0}),c.initializeJiraIssueCollector(this.props.feedbackKey),e=()=>{u.default((()=>{const e=window.__jira_issue_collector_trigger_fns__;if(!c.issueCollectors||!e)return void this.setState({isLoading:!1});const t=c.issueCollectors[this.props.feedbackKey];t?(this.setState({showCollectorDialog:e[t.id]}),this.state.showCollectorDialog&&this.state.showCollectorDialog(),this.setState({isLoading:!1})):this.setState({isLoading:!1})}),1500)},"complete"===document.readyState?setTimeout(e,0):window.onload=e}}}var g=p})),r.register("gGWK9",(function(t,n){e(t.exports,"issueCollectors",(function(){return a})),e(t.exports,"initializeJiraIssueCollector",(function(){return l}));var o=r("jAAg3"),i=r("7NU5c");const a=o.settings().JIRA_ISSUE_COLLECTORS,s=e=>{const t=document.querySelectorAll(e);t.length>0&&t.forEach(((e,t)=>{t>0&&e.remove()}))},l=(e,t)=>{const r=a[e];if(r){const e=r.id,n=r.url;(e=>{Array.from(document.querySelectorAll("script[data-issue-collector]")).filter((t=>t.attributes["data-issue-collector"].value!==e)).forEach((e=>{e.remove()}))})(e);if(!document.querySelector(`script[data-issue-collector="${e}"]`)){window.__jira_issue_collector_trigger_fns__=window.__jira_issue_collector_trigger_fns__||{},window.ATL_JQ_PAGE_PROPS=window.ATL_JQ_PAGE_PROPS||{},window.ATL_JQ_PAGE_PROPS[e]=window.ATL_JQ_PAGE_PROPS[e]||{},window.ATL_JQ_PAGE_PROPS[e].triggerFunction=t=>{window.__jira_issue_collector_trigger_fns__[e]=t},t&&(window.ATL_JQ_PAGE_PROPS[e].fieldValues=()=>({...window.ATL_JQ_PAGE_PROPS[e].fieldValues,...t}));const r=document.createElement("script");r.setAttribute("nonce",i.default),r.defer=!0,r.setAttribute("data-issue-collector",e),r.src=n,document.head.appendChild(r)}setTimeout((()=>{s("#atlwdg-blanket"),s("#atlwdg-container")}),3e3)}}})),r.register("jtcYm",(function(t,n){e(t.exports,"default",(function(){return o}));var o=r("7RIig").defineMessages({giveFeedback:{id:"frontbucket.components.feedbackButton.giveFeedback",defaultMessage:"Give feedback"}})})),r.register("5spni",(function(t,n){e(t.exports,"ConnectSourceWebCards",(function(){return r("a6TGQ").default})),e(t.exports,"ConnectPullRequestWebCards",(function(){return r("abfYX").default}));r("a6TGQ"),r("abfYX")})),r.register("a6TGQ",(function(n,o){e(n.exports,"default",(function(){return h}));var i=r("jgze0"),a=r("61szk"),s=r("6tbO4"),l=r("iOvKa"),c=r("hp8zO"),u=r("69smv"),d=r("hTK5T"),p=r("8CuNm"),g=r("8gVoB");const f=s.connect((e=>({principalId:d.getTargetUserKey(e),repository:u.getCurrentRepository(e),hash:c.get(e,"repository.source.section.hash"),sourceObject:e.repository.source.section.sourceObject})))((e=>{const{principalId:r,repository:n,hash:o,sourceObject:i,isCollapsed:s}=e;if(!r||!n||!i||i.isLoading)return null;const[l,c]=n.full_name.split("/"),{path:u,treeEntry:d}=i;return""===u?t(a).createElement(g.WebCards,{principalId:r,location:"org.bitbucket.source",isCollapsed:s,target:p.repositoryTarget({repositoryOwner:l,repositorySlug:c})}):u&&o&&d?"directory"===d.type?t(a).createElement(g.WebCards,{principalId:r,location:"org.bitbucket.source.directory",isCollapsed:s,target:p.commitDirectoryTarget({repositoryOwner:l,repositorySlug:c,path:`${u}/`,hash:o})}):t(a).createElement(g.WebCards,{principalId:r,location:"org.bitbucket.source.file",isCollapsed:s,target:p.commitFileTarget({repositoryOwner:l,repositorySlug:c,path:u,hash:o})}):null}));class m extends a.PureComponent{render(){return t(a).createElement(l.Switch,null,t(a).createElement(l.Route,{exact:!0,path:"/:repositoryOwner/:repositorySlug/src/:ref/:path+",render:this.renderWebCard}),t(a).createElement(l.Route,{path:["/:repositoryOwner/:repositorySlug/diff/:path+","/:repositoryOwner/:repositorySlug/history/:path+","/:repositoryOwner/:repositorySlug/history-node/:ref/:path+","/:repositoryOwner/:repositorySlug/src/:refOrHash"],render:this.renderWebCard}))}constructor(...e){super(...e),this.renderWebCard=e=>t(a).createElement(f,t(i)({},e,{isCollapsed:this.props.isCollapsed}))}}var h=m})),r.register("8CuNm",(function(t,n){e(t.exports,"repositoryTarget",(function(){return a})),e(t.exports,"commitFileTarget",(function(){return s})),e(t.exports,"commitDirectoryTarget",(function(){return l})),e(t.exports,"branchTarget",(function(){return c}));var o=r("clBu2"),i=r("5z5yM");r("25qUv"),r("8sbbx");const a=({repositoryOwner:e,repositorySlug:t})=>({type:"repository",full_name:`${e}/${t}`,name:t,links:{self:{href:o.default.api.v20.repositoryAbs(e,t)}}}),s=({path:e,hash:t,repositoryOwner:r,repositorySlug:n})=>({type:"commit_file",path:e,commit:{type:"commit",hash:t,repository:a({repositoryOwner:r,repositorySlug:n})},links:{self:{href:i.default.api.v20.sourceAbs(`${r}/${n}`,t,e)}}}),l=e=>({...s(e),type:"commit_directory"}),c=({name:e,repositoryOwner:t,repositorySlug:r})=>({type:"branch",name:e,repository:a({repositoryOwner:t,repositorySlug:r}),links:{self:{href:o.default.api.v20.branchAbs(t,r,e)}}})})),r.register("8gVoB",(function(n,o){e(n.exports,"WebCards",(function(){return f}));var i=r("jgze0"),a=r("61szk"),s=r("4Rd8x"),l=r("hp8zO"),c=r("7e0vh"),u=r("8T5Ac"),d=r("w9T78"),p=r("1dp6D"),g=r("aytma");class f extends a.PureComponent{render(){const{principalId:e,target:r,location:n,isCollapsed:o}=this.props;return t(a).createElement(c.ConnectIframes,{moduleType:"webCards",principalId:e,target:r,location:n,width:"100%",loadingComponent:()=>null,loadingFailedComponent:()=>null},(e=>e.length>0&&e.map((({Component:e,module:r})=>{const n=l.get(r,"descriptor.name.value"),c=t(a).createElement(d.default,{url:l.get(r,"descriptor.icon.url"),className:l.get(r,"descriptor.params.auiIcon")});return o?t(a).createElement(s.default,{key:r.id,position:"left",content:n},c):t(a).createElement(g.Card,{key:r.id,"data-qa":"connect-webcard"},t(a).createElement(u.ConnectedExpander,{defaultIsCollapsed:!0,localStorageKey:`${r.id}.card.collapsed`,icon:c,isLoading:!1,label:n,sectionAriaLabel:n},t(a).createElement(e,{loadingComponent:()=>t(a).createElement(p.default,{module:r,delay:300}),loadingTimeoutComponent:e=>t(a).createElement(p.default,t(i)({action:"timeout"},e,{module:r})),loadingFailedComponent:()=>t(a).createElement(p.default,{action:"failed",module:r})})))}))))}}})),r.register("w9T78",(function(n,o){e(n.exports,"default",(function(){return c}));var i=r("eQkAL"),a=r("61szk");const s=i.default("span",{target:"e408k2m0"})({name:"96j35y",styles:"height:24px;width:24px;&::before{font-size:20px;margin-left:2px;margin-top:-10px;}"});class l extends a.PureComponent{render(){const{className:e,url:r}=this.props;if(r)return t(a).createElement("img",{src:r,alt:"",width:"24",height:"24"});const n=["aui-icon","aui-icon-large",e].join(" ").trim();return t(a).createElement(s,{className:n})}}var c=l})),r.register("1dp6D",(function(n,o){e(n.exports,"default",(function(){return g}));var i=r("jgze0"),a=r("61szk"),s=r("7RIig"),l=r("1HQ2H"),c=r("hp8zO"),u=r("7HEfz"),d=r("8bsam"),p=r("acomO");class g extends a.PureComponent{componentDidMount(){const{delay:e}=this.state;e&&(this.timeout=setTimeout((()=>this.setState({delay:0})),e))}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{delay:e}=this.state,{action:r,module:n,failedCallback:o}=this.props;if("loading"===r&&e)return!1;const g=c.get(n,"app_name",c.get(n,"app_key","")),f=c.get(n,"app_base_url",c.get(n,"source.url",""));return t(a).createElement(p.Container,null,"loading"===r?t(a).createElement(p.Spinner,null,t(a).createElement(l.default,{size:"medium",delay:0})):g&&f&&t(a).createElement(s.FormattedMessage,t(i)({},d.default[r],{values:{link:t(a).createElement("a",{href:f,target:"_blank"},g),action:"timeout"===r&&t(a).createElement(u.default,{appearance:"link",spacing:"none",onClick:o},t(a).createElement(s.FormattedMessage,d.default.cancelText))}})))}constructor(...e){super(...e),this.state={delay:this.props.delay}}}g.defaultProps={action:"loading",delay:0}})),r.register("acomO",(function(t,n){e(t.exports,"Container",(function(){return a})),e(t.exports,"Spinner",(function(){return s}));var o=r("eQkAL"),i=r("6aCAs");const a=o.default("small",{target:"ey323gi0"})({name:"rmxqah",styles:"display:flex;justify-content:center;align-items:center;margin:0;"}),s=o.default("div",{target:"ey323gi1"})("margin:",i.gridSize(),"px 0;")})),r.register("aytma",(function(t,n){e(t.exports,"Card",(function(){return a}));var o=r("eQkAL"),i=r("6aCAs");const a=o.default("div",{target:"ejd26n00"})("& + &{margin-top:",1.5*i.gridSize(),"px;}")})),r.register("abfYX",(function(n,o){e(n.exports,"default",(function(){return d}));var i=r("61szk"),a=r("6tbO4"),s=r("hTK5T"),l=r("csqQL"),c=r("8gVoB");class u extends i.PureComponent{render(){const{principalId:e,target:r,isCollapsed:n}=this.props;return e&&r?t(i).createElement(c.WebCards,{principalId:e,target:r,isCollapsed:n,location:"org.bitbucket.pullrequest"}):null}}var d=a.connect((e=>({principalId:s.getTargetUserKey(e),target:l.getCurrentPullRequest(e)})))(u)}))}();
//# sourceMappingURL=shared.576a79e7.js.map
